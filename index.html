<!DOCTYPE html>
<html lang="en">
 <head>   
    <meta charset	="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="minimal-ui, width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name		="description" content="">
    <meta name		="author" content="Xing Yu">

	<meta name="application-name" content="NG BUSES">
	<meta name="apple-mobile-web-app-title" content="Xing Yu">
	<link rel="apple-touch-icon" href="nxy.png">
<link rel="apple-touch-startup-image" href="nxy.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
	<title>Xing Yu</title>
<meta http-equiv="Expires" content="60000" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"> 
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script> 
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"> 

<script>
$(document).ready(function(){

    $("#BusStopNumber").on('change', function(){

var bus, x = '';
var i= 0;
var d = new Date();
id=$('#BusStopNumber').val();

var link= "https://arrivelah.herokuapp.com/?id=".concat(id);

x+="<p> Bus Stop ID : "+id+'</p><br>';
x+= '  <div class="table-responsive"> <table class="table"><thead><tr><th>Bus Number</th><th> 1st bus </th><th> 2nd bus </th></tr></thead><tbody>'
;

$.getJSON(link, function(bus) { 

for (i in bus.services) {
var a=bus.services[i].next.time;
var b=bus.services[i].subsequent.time;

var ahours=(new Date(a)).getHours();
var amins=(new Date(a)).getMinutes();
var bhours=(new Date(b)).getHours();
var bmins=(new Date(b)).getMinutes();
amins = (amins < 10) ? ("0" + amins) : amins;
bmins = (bmins < 10) ? ("0" + bmins) : bmins;

var bus1time = Math.floor(((new Date(a)).getTime() - (new Date(d)).getTime())/60000);
var bus2time= Math.floor(((new Date(b)).getTime() - (new Date(d)).getTime())/60000);

    x += '<tr><td><h3>Bus ' + bus.services[i].no + '</h3></td><td>' ;
    x += bus1time + " mins <br>"  + ahours +":"+ amins+'</td><td>';    
    x += bus2time + " mins <br>"  + bhours +":"+ bmins+'</td></tr>';  

};
x+="</tbody></table></div>"
;


$("#stage").html(x);
x="";
});
}); 
});
</script>
</head>
<body>
<div class="container">
<form>
  <select class="form-control" name="BusStopID" id="BusStopNumber">
<option selected>Choose your bus stop</option>
    <option value="66061">BCA Academy</option>
    <option value="66069">Comfort Delgro</option>
    <option value="52059">Blk 219</option>
    <option value="52051">Blk 147</option>
    <option value="80279">Mountbatten MRT</option>    
  </select>
</form>
      <p id = "stage"></p>
</div>

<footer role="contentinfo">
 <div id="footer" class="container">
<center>

 <p>Designed and built by ngxingyu &copy; </p> 
<br>
</center>
 </div>
</footer>

      
      
      
</body>

</html>